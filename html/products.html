<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Products - CARTIFY</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* ---------- Base ---------- */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#f8f9fa; color:#333; -webkit-font-smoothing:antialiased; }
.container { max-width:1400px; margin:0 auto; padding:0 20px; }

/* ---------- Header ---------- */
header { background:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.08); position:sticky; top:0; z-index:1000; }
.header-content { display:flex; justify-content:space-between; align-items:center; padding:1rem 0; }
.logo h1 { font-size:1.8rem; letter-spacing:2px; color:#2c3e50; }
nav { display:flex; gap:1.25rem; }
nav a { text-decoration:none; color:#555; font-weight:500; }
nav a:hover { color:#3498db; }
.cart-icon { position:relative; font-size:1.5rem; cursor:pointer; user-select:none; }
.cart-count { position:absolute; top:-8px; right:-8px; background:#e74c3c; color:white; border-radius:50%; width:20px; height:20px; display:flex; align-items:center; justify-content:center; font-size:0.75rem; font-weight:700; }

/* ---------- Layout ---------- */
.products-container { display:flex; gap:2rem; padding:2rem 0; min-height:calc(100vh - 200px); }
.sidebar { width:280px; background:white; padding:1.5rem; border-radius:12px; position:sticky; top:90px; box-shadow:0 2px 15px rgba(0,0,0,0.06); }
.sidebar h3 { font-size:1.3rem; margin-bottom:1rem; color:#2c3e50; border-bottom:2px solid #3498db; padding-bottom:0.45rem; }
.filter-section { margin-bottom:1.3rem; }
.filter-option { display:flex; align-items:center; gap:0.6rem; padding:0.25rem; cursor:pointer; border-radius:6px; }
.filter-option:hover { background:#f7f7f7; }
.clear-filters { width:100%; padding:0.7rem; background:#e74c3c; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:600; }

/* ---------- Main content ---------- */
.main-content { flex:1; }
.products-header { background:white; padding:1rem 1.5rem; border-radius:12px; margin-bottom:1.4rem; box-shadow:0 2px 12px rgba(0,0,0,0.06); display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap; }
.products-header h2 { font-size:1.6rem; color:#2c3e50; }
.controls { display:flex; gap:1rem; align-items:center; }
.sort-select { padding:0.6rem 0.9rem; border-radius:8px; border:1px solid #ddd; background:white; }

/* ---------- Product grid ---------- */
.product-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:1.6rem; }
.product-card { background:white; border-radius:12px; overflow:hidden; box-shadow:0 4px 15px rgba(0,0,0,0.06); display:flex; flex-direction:column; transition:transform .22s,box-shadow .22s; }
.product-card:hover { transform:translateY(-6px); box-shadow:0 10px 30px rgba(0,0,0,0.12); }
.product-image { width:100%; height:220px; object-fit:cover; background:#f0f0f0; cursor:pointer; }
.product-info { padding:14px; flex:1; cursor:pointer; }
.product-name { font-weight:700; color:#2c3e50; margin-bottom:6px; }
.product-description { color:#7f8c8d; font-size:0.95rem; margin-bottom:8px; line-height:1.35; min-height:42px; }
.product-rating { color:#f39c12; margin-bottom:8px; }
.product-price { font-weight:700; color:#27ae60; font-size:1.1rem; }

/* ---------- Add to cart button ---------- */
.add-cart-btn { width:90%; margin:12px auto; padding:10px; background:#27ae60; color:white; border:none; border-radius:10px; font-weight:700; cursor:pointer; transition:transform .12s,background .12s; display:block; text-align:center; }
.add-cart-btn:hover { transform:translateY(-3px); background:#1e8c4d; }

/* ---------- Notification ---------- */
#cartNotify { display:none; position:fixed; bottom:22px; right:22px; background:#27ae60; color:white; padding:12px 16px; border-radius:10px; z-index:3000; font-weight:700; box-shadow:0 6px 20px rgba(0,0,0,0.18); }

/* ---------- Frosted glass popup (Style B) ---------- */
.cart-overlay { display:none; position:fixed; inset:0; backdrop-filter: blur(4px) saturate(110%); background:rgba(0,0,0,0.45); z-index:4000; align-items:center; justify-content:center; padding:20px; }
.cart-popup { width:100%; max-width:680px; border-radius:16px; background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02)); box-shadow:0 10px 50px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.08); color:#fff; padding:20px; position:relative; transform:translateY(-10px); opacity:0; transition:opacity .22s,transform .22s; display:flex; gap:18px; }
.cart-popup.open { transform:translateY(0); opacity:1; }

/* popup left: items */
.cart-items { flex:1; max-height:60vh; overflow:auto; padding-right:8px; }
.cart-item { display:flex; gap:12px; align-items:center; padding:10px 8px; border-radius:10px; margin-bottom:10px; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); }
.cart-item img { width:72px; height:72px; object-fit:cover; border-radius:8px; flex-shrink:0; }
.cart-item .meta { flex:1; color:#fff; }
.cart-item .meta .name { font-weight:700; font-size:0.95rem; color:#fff; margin-bottom:6px; }
.cart-item .meta .price { color:#cdeac6; font-weight:700; margin-bottom:6px; }
.qty-controls { display:flex; align-items:center; gap:8px; }
.qty-btn { width:30px; height:30px; border-radius:8px; background:rgba(255,255,255,0.08); color:#fff; border:none; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; font-weight:700; }

/* popup right: summary */
.cart-summary { width:320px; padding:12px; border-left:1px solid rgba(255,255,255,0.04); display:flex; flex-direction:column; gap:12px; }
.cart-summary h3 { margin-bottom:6px; color:#fff; }
.summary-row { display:flex; justify-content:space-between; color:#e6f8e6; }
.checkout-btn { margin-top:8px; padding:12px; border-radius:10px; border:none; background:#27ae60; color:#072a08; font-weight:800; cursor:pointer; }

/* remove button */
.remove-btn { background:transparent; border:none; color:#ffb3b3; cursor:pointer; font-weight:700; }

/* empty cart */
.cart-empty { color:#fff; text-align:center; padding:40px 0; opacity:.9; }
footer {
    background: #485c62;   /* white background */
    padding: 40px 0;
    color: #333;
    border-top: 1px solid #e5e5e5;
}

.footer-content {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 30px;
}

.footer-section {
    flex: 1;
    min-width: 220px;
}

.footer-section h3 {
    font-size: 18px;
    margin-bottom: 15px;
    color: #000; /* bold headings */
    font-weight: 600;
}

.footer-section p {
    color: #0b0b0b;
    line-height: 1.6;
}

.footer-section ul {
    list-style: none;
    padding: 0;
}

.footer-section ul li {
    margin-bottom: 8px;
}

.footer-section ul li a {
    color: #333;
    text-decoration: none;
    transition: 0.3s;
}

.footer-section ul li a:hover {
    color: #0073e6;   /* blue on hover */
}

.social-links a {
    display: inline-block;
    margin-right: 12px;
    font-size: 20px;
    color: #333;
    transition: 0.3s;
}

.social-links a:hover {
    color: #0073e6;   /* blue hover */
}


.footer-bottom {
    text-align: center;
    margin-top: 25px;
    padding-top: 15px;
    border-top: 1px solid #e5e5e5;
}

.footer-bottom p {
    color: #555;
    font-size: 14px;
}


/* small screens */
@media (max-width:720px) {
    .cart-popup { flex-direction:column; max-width:92%; padding:14px; }
    .cart-summary { width:100%; border-left:none; border-top:1px solid rgba(255,255,255,0.04); padding-top:12px; }
    .cart-item img { width:64px; height:64px; }
}
</style>
</head>
<body>

<!-- notification -->
<div id="cartNotify">‚úì Added to Cart</div>

<!-- header -->
<header>
    <div class="container">
        <div class="header-content">
            <div class="logo"><h1>CARTIFY</h1></div>
            <nav>
                <a href="index.html">HOME</a>
                <a href="products.html">PRODUCTS</a>
            </nav>

            <div class="cart-icon" id="cartBtn">
                <span class="cart-count" id="cartCount">0</span> üõí
            </div>
        </div>
    </div>
</header>

<!-- main -->
<div class="container">
    <div class="products-container">
        <aside class="sidebar">
            <h3>Filters</h3>
            <div class="filter-section">
                <h4>Category</h4>
                <label class="filter-option"><input type="checkbox" name="category" value="ethnic"><span>Ethnic Wear</span></label>
                <label class="filter-option"><input type="checkbox" name="category" value="tshirts"><span>T-Shirts</span></label>
                <label class="filter-option"><input type="checkbox" name="category" value="casuals"><span>Casuals</span></label>
                <label class="filter-option"><input type="checkbox" name="category" value="accessories"><span>Accessories</span></label>
            </div>

            <div class="filter-section">
                <h4>Rating</h4>
                <label class="filter-option"><input type="radio" name="rating" value="4.5"><span>‚≠ê 4.5+</span></label>
                <label class="filter-option"><input type="radio" name="rating" value="4"><span>‚≠ê 4+</span></label>
                <label class="filter-option"><input type="radio" name="rating" value="3"><span>‚≠ê 3+</span></label>
                <label class="filter-option"><input type="radio" name="rating" value=""><span>All</span></label>
            </div>

            <div class="filter-section">
                <h4>Price</h4>
                <label class="filter-option"><input type="radio" name="price" value="0-30"><span>Under $30</span></label>
                <label class="filter-option"><input type="radio" name="price" value="30-60"><span>$30 - $60</span></label>
                <label class="filter-option"><input type="radio" name="price" value="60-100"><span>$60 - $100</span></label>
                <label class="filter-option"><input type="radio" name="price" value="100-999"><span>$100+</span></label>
            </div>

            <button class="clear-filters" onclick="clearAllFilters()">Clear All Filters</button>
        </aside>

        <div class="main-content">
            <div class="products-header">
                <h2 id="categoryTitle">All Products</h2>
                <div class="controls">
                    <div class="results-count" id="resultsCount">Showing 0 products</div>
                    <select id="sortSelect" class="sort-select" onchange="sortProducts()">
                        <option value="">Sort By</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="rating">Rating: High to Low</option>
                        <option value="name">Name: A to Z</option>
                    </select>
                </div>
            </div>

            <div class="product-grid" id="productGrid"></div>

            <div class="no-results" id="noResults" style="display:none;">
                <h3>No products found</h3>
                <p>Try adjusting your filters</p>
            </div>
        </div>
    </div>
</div>

<!-- Frosted Cart Popup -->
<div class="cart-overlay" id="cartOverlay" aria-hidden="true">
    <div class="cart-popup" id="cartPopup" role="dialog" aria-modal="true">
        <div class="cart-items" id="cartItems">
            <!-- Cart items injected here -->
        </div>

        <div class="cart-summary" id="cartSummary">
            <h3>Cart Summary</h3>
            <div class="summary-row"><span>Items:</span><span id="summaryItems">0</span></div>
            <div class="summary-row"><span>Subtotal:</span><span id="summarySubtotal">$0.00</span></div>
            <div class="summary-row"><span>Shipping:</span><span id="summaryShipping">$0.00</span></div>
            <div class="summary-row" style="font-weight:800; font-size:1.05rem;"><span>Total:</span><span id="summaryTotal">$0.00</span></div>
            <button class="checkout-btn" id="checkoutBtn">Checkout</button>
            <button class="checkout-btn" style="background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.12);" id="closeCartBtn">Close</button>
        </div>
    </div>
</div>

<!-- Footer -->
<
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Cartify</h3>
                    <p>Your one-stop shop for quality products across all categories exclusively for mens. We deliver excellence in every order.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Terms & Conditions</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Follow Us</h3>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="#" aria-label="Pinterest"><i class="fab fa-pinterest-p"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Cartify. All rights reserved.</p>
            </div>
        </div>
    </footer>

<script>
// ====== Sample product DB for demo (only used if localStorage empty) ======
const sampleProducts = {
    ethnic: [
        { id: 1, name: "Ethnic Kurta", description: "Traditional Kurta", price: 45.00, rating:4.6, category:'ethnic', image: "https://picsum.photos/seed/eth1/800/600" },
        { id: 2, name: "Silk Saree", description: "Vibrant ethnic saree", price: 120.00, rating:4.8, category:'ethnic', image: "https://picsum.photos/seed/eth2/800/600" }
    ],
    tshirts: [
        { id: 11, name: "Crew Neck Tee", description: "Comfortable cotton tee", price: 19.99, rating:4.2, category:'tshirts', image: "https://picsum.photos/seed/t1/800/600" },
        { id: 12, name: "Graphic Tee", description: "Trendy printed tee", price: 24.50, rating:4.4, category:'tshirts', image: "https://picsum.photos/seed/t2/800/600" }
    ],
    casuals: [
        { id: 21, name: "Casual Shirt", description: "Casual button-up", price: 35.00, rating:4.1, category:'casuals', image: "https://picsum.photos/seed/c1/800/600" }
    ],
    accessories: [
        { id: 31, name: "Leather Belt", description: "Premium belt", price: 29.99, rating:4.3, category:'accessories', image: "https://picsum.photos/seed/a1/800/600" }
    ]
};

// ====== App state ======
let allProducts = [];
let filteredProducts = [];

// ====== Helpers ======
function readDB() {
    let db = JSON.parse(localStorage.getItem('productsDatabase') || 'null');
    if (!db) {
        localStorage.setItem('productsDatabase', JSON.stringify(sampleProducts));
        db = sampleProducts;
    }
    return db;
}

function loadProducts() {
    const db = readDB();
    allProducts = [...(db.ethnic || []), ...(db.tshirts || []), ...(db.casuals || []), ...(db.accessories || [])];

    // if category param present
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category');
    if (category) {
        document.getElementById('categoryTitle').textContent = category.charAt(0).toUpperCase()+category.slice(1);
        const cb = document.querySelector(`input[name="category"][value="${category}"]`);
        if (cb) cb.checked = true;
    }

    applyFilters();
}

// ====== Render products ======
function displayProducts(products) {
    const grid = document.getElementById('productGrid');
    const noResults = document.getElementById('noResults');

    if (!products || products.length === 0) {
        grid.style.display = 'none';
        noResults.style.display = 'block';
        document.getElementById('resultsCount').textContent = 'No products found';
        return;
    }

    grid.style.display = 'grid';
    noResults.style.display = 'none';

    grid.innerHTML = products.map(product => `
        <div class="product-card">
            <img src="${product.image}" class="product-image" alt="${product.name}" onclick="viewProduct(${product.id})" />
            <div class="product-info" onclick="viewProduct(${product.id})">
                <div class="product-name">${product.name}</div>
                <div class="product-description">${product.description}</div>
                <div class="product-rating">${'‚≠ê'.repeat(Math.floor(product.rating))} ${product.rating}</div>
                <div class="product-price">$${product.price.toFixed(2)}</div>
            </div>
            <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart(${product.id}, true)">üõí Add to Cart</button>
        </div>
    `).join('');

    document.getElementById('resultsCount').textContent = `Showing ${products.length} products`;
}

// ====== Filters, sorting ======
function applyFilters() {
    const selectedCategories = Array.from(document.querySelectorAll('input[name="category"]:checked')).map(cb => cb.value);
    const selectedRating = document.querySelector('input[name="rating"]:checked')?.value || '';
    const selectedPrice = document.querySelector('input[name="price"]:checked')?.value || '';

    filteredProducts = allProducts.filter(product => {
        if (selectedCategories.length && !selectedCategories.includes(product.category)) return false;
        if (selectedRating && product.rating < parseFloat(selectedRating)) return false;
        if (selectedPrice) {
            const [min,max] = selectedPrice.split('-').map(Number);
            if (product.price < min || product.price > max) return false;
        }
        return true;
    });

    displayProducts(filteredProducts);
}

function sortProducts() {
    const sortBy = document.getElementById('sortSelect').value;
    let sorted = [...filteredProducts];
    switch(sortBy) {
        case 'price-low': sorted.sort((a,b)=>a.price-b.price); break;
        case 'price-high': sorted.sort((a,b)=>b.price-a.price); break;
        case 'rating': sorted.sort((a,b)=>b.rating-a.rating); break;
        case 'name': sorted.sort((a,b)=>a.name.localeCompare(b.name)); break;
    }
    displayProducts(sorted);
}

function clearAllFilters() {
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    document.querySelectorAll('input[type="radio"]').forEach(rb => rb.checked = false);
    document.getElementById('sortSelect').value = '';
    applyFilters();
}

function viewProduct(id) {
    // in your app this opens product detail; keep behavior
    window.location.href = `product-detail.html?id=${id}`;
}

// ====== CART logic (localStorage: array of {id,quantity}) ======
function getCart() {
    return JSON.parse(localStorage.getItem('cart') || '[]');
}

function saveCart(cart) {
    localStorage.setItem('cart', JSON.stringify(cart));
}

function updateCartDisplay() {
    const cart = getCart();
    const count = cart.reduce((s,it) => s + it.quantity, 0);
    document.getElementById('cartCount').textContent = count;
}

// addToCart(productId, openPopup) ‚Äî openPopup true opens popup after add
function addToCart(productId, openPopup=false) {
    const cart = getCart();
    const existing = cart.find(i => i.id === productId);
    if (existing) existing.quantity += 1;
    else cart.push({ id: productId, quantity: 1 });
    saveCart(cart);
    updateCartDisplay();
    showAddedNotification();
    if (openPopup) {
        openCart(); renderCartItems();
    }
}

// ====== Popup open / close / render ======
const cartOverlay = document.getElementById('cartOverlay');
const cartPopup = document.getElementById('cartPopup');
const cartItemsContainer = document.getElementById('cartItems');

function openCart() {
    cartOverlay.style.display = 'flex';
    setTimeout(()=> cartPopup.classList.add('open'), 20);
    renderCartItems();
}

function closeCart() {
    cartPopup.classList.remove('open');
    setTimeout(()=> cartOverlay.style.display = 'none', 220);
}

document.getElementById('cartBtn').addEventListener('click', () => {
    openCart();
});

// Close buttons
document.getElementById('closeCartBtn').addEventListener('click', closeCart);
document.getElementById('checkoutBtn').addEventListener('click', () => {
    // redirect to order-details.html with delivered status
    window.location.href = 'order-confirmation.html?status=delivered';
    closeCart();
});

// clicking overlay outside popup closes
cartOverlay.addEventListener('click', (e) => {
    if (e.target === cartOverlay) closeCart();
});

// render cart items
function renderCartItems() {
    const cart = getCart();
    if (!cart.length) {
        cartItemsContainer.innerHTML = `<div class="cart-empty">Your cart is empty.</div>`;
        updateSummary(0,0);
        return;
    }

    // map cart entries to product details
    const itemsHtml = cart.map(entry => {
        const product = allProducts.find(p => p.id === entry.id) || { name:'Unknown', price:0, image:'' };
        const lineTotal = (product.price * entry.quantity);
        return `
            <div class="cart-item" data-id="${entry.id}">
                <img src="${product.image}" alt="${product.name}">
                <div class="meta">
                    <div class="name">${product.name}</div>
                    <div class="price">$${product.price.toFixed(2)} x ${entry.quantity} = $${lineTotal.toFixed(2)}</div>
                    <div style="margin-top:8px;">
                        <div class="qty-controls">
                            <button class="qty-btn" onclick="decreaseQty(event, ${entry.id})">‚àí</button>
                            <div style="min-width:34px; text-align:center; font-weight:700; color:#fff;">${entry.quantity}</div>
                            <button class="qty-btn" onclick="increaseQty(event, ${entry.id})">+</button>
                            <button class="remove-btn" style="margin-left:10px;" onclick="removeItem(event, ${entry.id})">Remove</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }).join('');
    cartItemsContainer.innerHTML = itemsHtml;
    const totalItems = cart.reduce((s,i)=>s + i.quantity, 0);
    const subtotal = cart.reduce((s,i)=> {
        const p = allProducts.find(pp => pp.id === i.id);
        return s + ((p?.price || 0) * i.quantity);
    }, 0);
    // simple static shipping rule for example
    const shipping = subtotal > 50 || subtotal === 0 ? 0 : 5.99;
    updateSummary(totalItems, subtotal, shipping);
}

// increase / decrease / remove functions
function increaseQty(e, id) {
    e.stopPropagation();
    const cart = getCart();
    const item = cart.find(i => i.id === id);
    if (item) { item.quantity += 1; saveCart(cart); renderCartItems(); updateCartDisplay(); }
}

function decreaseQty(e, id) {
    e.stopPropagation();
    const cart = getCart();
    const itemIndex = cart.findIndex(i => i.id === id);
    if (itemIndex > -1) {
        cart[itemIndex].quantity -= 1;
        if (cart[itemIndex].quantity <= 0) cart.splice(itemIndex,1);
        saveCart(cart); renderCartItems(); updateCartDisplay();
    }
}

function removeItem(e, id) {
    e.stopPropagation();
    let cart = getCart();
    cart = cart.filter(i => i.id !== id);
    saveCart(cart);
    renderCartItems();
    updateCartDisplay();
}

function updateSummary(totalItems, subtotal, shipping=0) {
    document.getElementById('summaryItems').textContent = totalItems;
    document.getElementById('summarySubtotal').textContent = `$${subtotal.toFixed(2)}`;
    document.getElementById('summaryShipping').textContent = `$${shipping.toFixed(2)}`;
    document.getElementById('summaryTotal').textContent = `$${(subtotal + shipping).toFixed(2)}`;
}

// small added-notify
function showAddedNotification() {
    const n = document.getElementById('cartNotify');
    n.style.display = 'block';
    setTimeout(()=> n.style.display = 'none', 1300);
}

// ===== init =====
document.querySelectorAll('input[name="category"], input[name="rating"], input[name="price"]').forEach(el => {
    el.addEventListener('change', applyFilters);
});

// initial load
loadProducts();
updateCartDisplay();
</script>

</body>
</html>
